/*
 * File: app/view/MainViewport.js
 *
 * This file was generated by Sencha Architect version 3.5.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('CustomerMgmt.view.MainViewport', {
  extend: 'Ext.container.Viewport',
  alias: 'widget.mainviewport',

  requires: [
    'CustomerMgmt.view.MainViewportViewModel',
    'CustomerMgmt.view.MainViewportViewController',
    'Ext.form.field.ComboBox',
    'Ext.form.field.Display',
    'Ext.button.Button',
    'Ext.grid.Panel',
    'Ext.view.Table',
    'Ext.toolbar.Paging',
    'Ext.grid.column.RowNumberer',
    'Ext.grid.column.Widget',
    'Ext.grid.column.Number',
    'Ext.grid.column.Date'
  ],

  controller: 'mainviewport',
  viewModel: {
    type: 'mainviewport'
  },
  layout: 'border',
  items: [
    {
      xtype: 'form',
      region: 'north',
      height: 75,
      bodyPadding: 5,
      defaults: {
        margin: '0 5 0 0'
      },
      style: 'background-color:white',
      layout: 'column',
      items: [
        {
          xtype: 'combobox',
          columnWidth: 0.25,
          name:'shopId',
          margin: '8 5 0 5',
          fieldLabel: '来源店铺',
          labelWidth: 75,
          editable: false,
          forceSelection: true,
          displayField: 'value',
          valueField: 'key',
          queryMode: 'local',
          value: '-1',
          bind: {
            store: '{usergrantshopstore}'
          }
        },
        {
          xtype: 'textfield',
          dataIndex: 'memberNick',
          columnWidth: 0.25,
          margin: '8 5 0 5',
          fieldLabel: '客户名称',
          labelWidth: 65
        },
        {
          xtype: 'textfield',
          columnWidth: 0.25,
          margin: '8 5 0 5',
          fieldLabel: '手机号码',
          labelWidth: 65,
          regex : /^\d{0,}$/,
          regexText : "只能输入数字"
        },
        {
          xtype: 'textfield',
          columnWidth: 0.25,
          margin: '8 5 0 5',
          fieldLabel: '收货人',
          labelWidth: 65
        },
        {
          xtype: 'textfield',
          columnWidth: 0.25,
          margin: '8 5 0 5',
          fieldLabel: '购买次数(≥)',
          labelWidth: 75,
          regex : /^\d{0,}$/,
          regexText : "只能输入数字"
        },
        {
          xtype: 'container',
          columnWidth: 0.25,
          height: 23,
          margin: '8 5 0 5',
          layout: 'column',
          items: [
            {
              xtype: 'textfield',
              columnWidth: 0.5,
              fieldLabel: '客单价',
              labelWidth: 65,
              regex: /^\d+(\.\d{1,2})?$/,
              regexText : "只能输入数字"
            },
            //{
            //  xtype: 'displayfield',
            //  columnWidth: 0.2,
            //  fieldLabel: '~ ',
            //  labelSeparator: '&nbsp;',
            //  labelWidth: 10,
            //  value: ''
            //},
            {
              xtype: 'textfield',
              columnWidth: 0.5,
              fieldLabel: '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ ',
              labelWidth: 65,
              labelSeparator: '&nbsp;',
              regex: /^\d+(\.\d{1,2})?$/,
              regexText : "只能输入数字"
            }
          ]
        },
        {
          xtype: 'container',
          columnWidth: 0.25,
          height: 23,
          margin: '8 5 0 5',
          layout: 'column',
          items: [
            {
              xtype: 'textfield',
              columnWidth: 0.5,
              fieldLabel: '未光顾天数',
              labelWidth: 65,
              regex : /^\d{0,}$/,
              regexText : "只能输入数字"
            },
            //{
            //  xtype: 'displayfield',
            //  columnWidth: 0.2,
            //  fieldLabel: '~ ',
            //  labelSeparator: '&nbsp;',
            //  labelWidth: 10,
            //  value: ''
            //},
            {
              xtype: 'textfield',
              columnWidth: 0.5,
              fieldLabel: '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;~ ',
              labelWidth: 65,
              labelSeparator: '&nbsp;',
              regex : /^\d{0,}$/,
              regexText : "只能输入数字"
            }
          ]
        },
        {
          xtype: 'button',
          columnWidth: 0.08,
          margin: '8 10 10 10',
          text: '查询',
          iconCls: 'btn-search',
          handler: 'onButtonSearchClick'
        },
        {
          xtype: 'button',
          columnWidth: 0.08,
          margin: '8 10 10 10',
          text: '清空',
          iconCls: 'btn-clear',
          handler: 'onButtonClearClick'
        }
      ]
    },
    {
      xtype: 'gridpanel',
      region: 'center',
      title: '',
      viewConfig: {
        height: 430
      },
      store: 'MainViewportStore',
      reference: 'CustomerMgmtGrid',
      dockedItems: [
        {
          xtype: 'pagingcustomtoolbar',
          id: 'pickLocationGrid',
          dock: 'bottom',
          displayInfo: true,
          store: 'MainViewportStore'
        },
        {
          xtype: 'toolbar',
          dock: 'top',
          layout: {
            type: 'hbox',
            defaultMargins: {
              top: 0,
              right: 6,
              bottom: 0,
              left: 6
            }
          },
          items: [
            {
              xtype: 'button',
              iconCls: "btn-add",
              text: '添加客户',
              listeners: {
                click: 'onButtonAdduserClick'
              }
            },
            {
              xtype: 'button',
              itemId: 'mybutton4',
              iconCls: 'btn-batch-import',
              text: '导入会员信息',
              listeners: {
                click: 'onButtonImportClick'
              }
            },
            {
              xtype: 'button',
              iconCls: 'page-excel',
              text: '导出EXCEL',
              listeners: {
                click: 'onButtonExportClick'
              }
            }
          ]
        }
      ],
      columns: {
        defaults: {
          cls: 'titleAlign'
        },
        items: [
          {
            xtype: 'rownumberer',
            width: 54,
            text: '序号'
          },
          {
            xtype: 'widgetcolumn',
            dataIndex: 'progressuser',
            text: '操作',
            tdCls: 'btngroup',
            width: 70,
            widget: {
              xtype: 'buttongroup',
              baseCls: '',
              layout: {
                type: "column"
              },
              defaults: {
                handler: "onUserColumnClick"
              },
              items: [{
                xtype: "button",
                command: "Update",
                iconCls: "btn-edit",
                text: "编辑"
              }]
            }

          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'memberNick',
            text: '客户名称'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'shopName',
            text: '来源店铺'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'guestunit',
            text: '客单价(元)'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'parchasetimes',
            text: '购买次数',
            format: '00'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'parchasenumber',
            text: '购买件数',
            format: '00'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'totalpurchase',
            text: '购买总金额'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'eturnquantity',
            text: '售后次数',
            format: '00'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'returbrate',
            text: '售后率'
          },
          {
            xtype: 'datecolumn',
            dataIndex: 'firstdate',
            text: '首次购买日期',
            format: 'm/j/Y'
          },
          {
            xtype: 'datecolumn',
            dataIndex: 'recebtdate',
            text: '最近购买日期',
            format: 'm/j/Y'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'notvisited',
            text: '未光顾天数',
            format: '00'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'memo',
            text: '备注',
            width: 230
          }]
      },
      listeners: {
        itemdblclick: 'onTableItemDblClick',
        selectionchange: 'onSelectionChange'
      }
    },
    {
      xtype: 'gridpanel',
      region: 'south',
      height: 159,
      title: '收货信息',
      reference: 'CustomerMgmtBottomGrid',
      bind:{
        store:'{receiptDetailGridStore}'
      },
      dockedItems: [
        {
          xtype: 'toolbar',
          dock: 'top',
          items: [
            {
              xtype: 'button',
              iconCls: "btn-add",
              text: '添加收货地址',
              listeners: {
                click: 'onButtonAddressClick'
              }
            }
          ]
        }
      ],
      columns: {
        defaults: {
          cls: 'titleAlign'
        },
        items: [
          {
            xtype: 'rownumberer',
            width: 50,
            text: '序号'
          },
          {
            xtype: 'widgetcolumn',
            dataIndex: 'progress',
            text: '操作',
            tdCls: 'btngroup',
            width: 160,
            widget: {
              xtype: 'buttongroup',
              baseCls: '',
              layout: {
                type: "column"
              },
              defaults: {
                handler: "onCommandColumnClick"
              },
              items: [{
                xtype: "button",
                command: "Update",
                iconCls: "btn-edit",
                text: "编辑"
              }, {
                xtype: "button",
                command: "Delete",
                iconCls: "btn-delete",
                text: "删除"
              }]
            }
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'name',
            text: '收货人'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'mobile',
            text: '手机号码',
            format: '00'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'idCardType',
            text: '证件类型'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'idCardNo',
            text: '证件号码'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'photo',
            text: '照片'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'provinceName',
            text: '省份'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'cityName',
            text: '市'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'districtName',
            text: '区(县)'
          },
          {
            xtype: 'numbercolumn',
            dataIndex: 'zipCode',
            text: '邮编',
            format: '00'
          },
          {
            xtype: 'gridcolumn',
            dataIndex: 'address',
            text: '详细地址'
          }
        ],
        viewConfig: {
            height: 593
        }
      }
    }
  ]
});