/*
 * File: app/view/EditDialog.js
 *
 * This file was generated by Sencha Architect version 3.5.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('ProductMgmt.view.ProductInfoDialog', {
  extend: 'Ext.window.Window',
  alias: 'widget.productinfodialog',

  requires: [
    'ProductMgmt.view.ProductInfoDialogViewModel',
    'ProductMgmt.view.ProductInfoDialogViewController',
    'ProductMgmt.view.CommonComboxWithDialog',
    'ProductMgmt.view.ProductInfoDialogTreeCombobox',
    'Common.ux.SaveCancelToolbar',
    'Ext.form.FieldSet',
    'Ext.form.field.ComboBox',
    'Ext.grid.Panel',
    'Ext.view.Table',
    'Ext.toolbar.Toolbar',
    'Ext.form.field.Number',
    'Ext.button.Button',
    'Ext.grid.column.Action'
  ],

  controller: 'productinfodialog',
  viewModel: {
    type: 'productinfodialog'
  },

  autoShow: true,
  height: 580,
  width: 800,
  modal: true,
  minWidth: 750,
  bodyPadding: '8 8 0 8',
  bodyStyle: {
    backgroundColor: 'white'
  },
  title: '商品信息',

  layout: {
    type: 'vbox',
    align: 'stretch'
  },
  items: [
    {
      xtype: 'form',
      layout: 'fit',
      border: false,
      items: [{
        xtype: 'fieldset',
        defaults: {
          columnWidth: 0.5,
          labelAlign: 'left',
          labelWidth: 80,
          margin: '0 5 6 0'
        },
        layout: 'column',
        title: '商品信息',
        items: [
          {
            xtype: 'textfield',
            fieldLabel: '商品编码<font color=red>*</font>',
            allowBlank: false,
            blankText: '请填写商品编码',
            maxLength: 50,
            maxLengthText: '长度控制在50个字符内',
            msgTarget: 'side',
            bind: {
              value: '{formData.productCode}',
              disabled: '{disabled}'
            }
          },
          {
            xtype: 'productinfodialogtreecombobox',
            treeHeight: 100,
            fieldLabel: '商品类目<font color=red>*</font>',
            allowBlank: false,
            editable: false,
            queryMode: 'local',
            labelAlign: 'left',
            rootVisible: false,
            animate: true,
            useArrows: true,
            bufferedRenderer: false,
            store: Ext.create('Ext.data.TreeStore', {
              defaultRootProperty: 'items',
              storeId: 'productInfoComboboxTreeStore',
              proxy: {
                type: 'ajax',
                url: '/api/product/category/tree',
                reader: {
                  type: 'json'
                }
              },
              fields: [
                'id', 'leaf', 'qtip',
                {
                  name: 'text', mapping: 'name'
                }],
              root: {
                text: '所有商品',
                expanded: true
              }
            }),
            bind: {
              value: '{formData.productCatId}'
            }
          },
          {
            xtype: 'productmgmt.commoncomboxwithdialog',
            queryMode: 'local',
            editable: false,
            emptyText: "请选择",
            valueField: 'id',
            displayField: 'name',
            fieldLabel: '商品产地',
            bind: {
              store: '{comboxWithDialogOriginStore}',
              value: '{formData.productOriginId}'
            },
            innerDialogConfig: {
              columnTitle: '商品产地',
              dialogTitle: '产地',
              dataIndex: 'name',
              refreshToolbarStore: 'originToolbarStore'
            }
          },
          {
            xtype: 'productmgmt.commoncomboxwithdialog',
            queryMode: 'local',
            editable: false,
            emptyText: "请选择",
            valueField: 'id',
            displayField: 'name',
            fieldLabel: '商品品牌',
            bind: {
              store: '{comboxWithDialogBrandStore}',
              value: '{formData.productBrandId}'
            },
            innerDialogConfig: {
              columnTitle: '商品品牌',
              dialogTitle: '品牌',
              dataIndex: 'name',
              refreshToolbarStore: 'brandToolbarStore'
            }
          },
          {
            xtype: 'textfield',
            columnWidth: 1,
            fieldLabel: '商品名称<font color=red>*</font>',
            allowBlank: false,
            blankText: '请填写商品名称',
            maxLength: 100,
            maxLengthText: '长度控制在100个字符内',
            msgTarget: 'side',
            bind: {
              value: '{formData.productName}'
            }
          }
        ]
      }]
    }
    ,
    {
      xtype: 'fieldset',
      flex: 1,
      padding: '5 12 10 10',
      layout: 'fit',
      title: '规格信息',
      items: [
        {
          xtype: 'gridpanel',
          title: '',
          bind: {
            store: '{skugridstore}'
          },
          plugins: [{
            ptype: 'cellediting',
            clicksToEdit: 1,
            listeners: {
              beforeedit: 'onCellBeforeEdit'
            }
          }],
          dockedItems: [
            /*{
             xtype: 'toolbar',
             dock: 'top',
             //overflowHandler: 'scroller',
             layout: {
             type: 'vbox',
             align: 'stretch'
             },
             items: [{
             xtype: 'buttongroup',
             columns: 10,
             defaults: {
             scrollable: true,
             handler: 'onPopulateOperate'
             },
             flex: 1,
             items: [
             {
             xtype: 'numberfield',
             width: 73,
             fieldLabel: '',
             margin: '2 0 2 5',
             emptyText: '销售价',
             msgTarget: 'side',
             step: 0.1,
             minValue: 0,
             maxValue: 100000,
             negativeText: '销售价最小值不能为负数'
             },
             {
             xtype: 'button',
             iconCls: 'btn-fill',
             margin: '2 5 2 0',
             modelField: 'salePrice',
             text: '填充'
             },
             {
             xtype: 'numberfield',
             width: 73,
             fieldLabel: '',
             margin: '2 0 2 5',
             emptyText: '市场参考价',
             msgTarget: 'side',
             step: 0.1,
             minValue: 0,
             maxValue: 100000,
             negativeText: '市场参考价最小值不能为负数'
             },
             {
             xtype: 'button',
             iconCls: 'btn-fill',
             margin: '2 5 2 0',
             modelField: 'marketPrice',
             text: '填充'
             },
             {
             xtype: 'numberfield',
             width: 73,
             fieldLabel: '',
             margin: '2 0 2 5',
             emptyText: '计费重量',
             msgTarget: 'side',
             step: 0.1,
             minValue: 0,
             maxValue: 100000,
             negativeText: '计费重量最小值不能为负数'
             },
             {
             xtype: 'button',
             iconCls: 'btn-fill',
             margin: '2 5 2 0',
             modelField: 'weight',
             text: '填充'
             },
             {
             xtype: 'numberfield',
             width: 73,
             fieldLabel: '',
             margin: '2 0 2 5',
             emptyText: '体积',
             msgTarget: 'side',
             step: 0.1,
             minValue: 0,
             maxValue: 100000,
             negativeText: '体积最小值不能为负数'
             },
             {
             xtype: 'button',
             iconCls: 'btn-fill',
             margin: '2 5 2 0',
             modelField: 'size',
             text: '填充'
             },
             {
             xtype: 'textfield',
             width: 73,
             fieldLabel: '',
             margin: '2 0 2 5',
             emptyText: '计量单位'
             },
             {
             xtype: 'button',
             iconCls: 'btn-fill',
             margin: '2 5 2 0',
             special: true,
             modelField: 'unit',
             text: '填充'
             },
             {
             xtype: 'textfield',
             width: 73,
             fieldLabel: '',
             margin: '2 0 2 5',
             emptyText: '采购单位'
             },
             {
             xtype: 'button',
             iconCls: 'btn-fill',
             margin: '2 5 2 0',
             special: true,
             modelField: 'purchaseUnit',
             text: '填充'
             },
             {
             xtype: 'numberfield',
             width: 73,
             fieldLabel: '',
             margin: '2 0 2 5',
             emptyText: '比例',
             msgTarget: 'side',
             step: 1,
             allowDecimals: false,
             minValue: 0,
             maxValue: 100000,
             negativeText: '比例最小值不能为负数'
             },
             {
             xtype: 'button',
             iconCls: 'btn-fill',
             margin: '2 5 2 0',
             modelField: 'proportion',
             text: '填充'
             }
             ]
             }]
             },*/ {
              xtype: 'toolbar',
              dock: 'top',
              overflowHandler: 'scroller',
              items: [{
                xtype: 'button',
                iconCls: 'btn-add',
                text: '添加',
                handler: 'onAddNewSkuButtonClick'
              }]
            }],
          columns: {
            defaults: {
              //align: 'center',
              cls:'titleAlign',
              tdCls: 'with-btngroup'
            },
            items: [{
              xtype: 'widgetcolumn',
              width: 40,
              tdCls: 'btngroup',
              text: '操作',
              editor: false,
              dataIndex: '12',
              widget: {
                xtype: 'buttongroup',
                baseCls: '',
                layout: {
                  type: "column"
                },
                defaultBindProperty: 'permission',
                setPermission: function () {
                  var buttonGroup = this,
                    btnArray = buttonGroup.items.items,
                    record = btnArray[0].ownerCt.getWidgetRecord();
                  if (record.get('isFromDb')) {
                    btnArray[0].setDisabled(true);
                  } else {
                    btnArray[0].setDisabled(false);
                  }

                },
                items: [{
                  xtype: 'button',
                  iconCls: 'btn-delete',
                  handler: 'onDeleteOneRecordButtonClick'
                }]
              }
            },
              {
                xtype: 'gridcolumn',
                dataIndex: 'skuCode',
                text: '规格编码<font color=red>*</font>',
                editor: {
                  allowBlank: false,
                  selectOnFocus: true,
                  blankText: '请填写规格编码',
                  maxLength: 50,
                  maxLengthText: '长度控制在50个字符内',
                  msgTarget: 'side'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'skuName',
                text: '规格名称<font color=red>*</font>',
                editor: {
                  allowBlank: false,
                  selectOnFocus: true,
                  blankText: '请填写规格名称',
                  maxLength: 100,
                  maxLengthText: '长度控制在100个字符内',
                  msgTarget: 'side'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'barCode',
                text: '条形码',
                editor: {
                  allowBlank: true,
                  selectOnFocus: true,
                  maxLength: 100,
                  maxLengthText: '长度控制在100个字符内',
                  msgTarget: 'side'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'property',
                text: '规格属性',
                editor: {
                  allowBlank: true,
                  selectOnFocus: true,
                  maxLength: 100,
                  maxLengthText: '长度控制在100个字符内',
                  msgTarget: 'side'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'salePrice',
                text: '销售价',
                align: 'right',
                formatter: 'currency("￥", 2)',
                layout: 'hbox',
                items: {
                  xtype: 'numberfield',
                  flex: 1,
                  margin: '2 2 2 2',
                  enableKeyEvents: true,
                  selectOnFocus: true,
                  modelField: 'salePrice',
                  listeners: {
                    specialKey: 'onPopulateOperate'
                  },
                  fieldLabel: '',
                  emptyText: '填充',
                  msgTarget: 'side',
                  step: 1,
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '销售价最小值不能为负数'
                },
                editor: {
                  xtype: 'numberfield',
                  allowBlank: false,
                  selectOnFocus: true,
                  blankText: '必填项',
                  msgTarget: 'side',
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '销售价最小值不能为负数'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'marketPrice',
                text: '市场参考价',
                align: 'right',
                formatter: 'currency("￥", 2)',
                layout: 'hbox',
                items: {
                  xtype: 'numberfield',
                  flex: 1,
                  enableKeyEvents: true,
                  selectOnFocus: true,
                  modelField: 'marketPrice',
                  listeners: {
                    specialKey: 'onPopulateOperate'
                  },
                  margin: '2 2 2 2',
                  fieldLabel: '',
                  emptyText: '填充',
                  msgTarget: 'side',
                  step: 1,
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '市场参考价最小值不能为负数'
                },
                editor: {
                  xtype: 'numberfield',
                  allowBlank: false,
                  selectOnFocus: true,
                  blankText: '必填项',
                  msgTarget: 'side',
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '市场参考价最小值不能为负数'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'weight',
                text: '计费重量(kg)',
                align: 'right',
                layout: 'hbox',
                items: {
                  xtype: 'numberfield',
                  flex: 1,
                  modelField: 'weight',
                  enableKeyEvents: true,
                  selectOnFocus: true,
                  listeners: {
                    specialKey: 'onPopulateOperate'
                  },
                  margin: '2 2 2 2',
                  fieldLabel: '',
                  emptyText: '填充',
                  msgTarget: 'side',
                  step: 1,
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '计费重量最小值不能为负数'
                },
                editor: {
                  xtype: 'numberfield',
                  allowBlank: false,
                  selectOnFocus: true,
                  blankText: '必填项',
                  msgTarget: 'side',
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '计费重量最小值不能为负数'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'size',
                text: '体积(m3)',
                align: 'right',
                layout: 'hbox',
                items: {
                  xtype: 'numberfield',
                  flex: 1,
                  enableKeyEvents: true,
                  selectOnFocus: true,
                  modelField: 'size',
                  listeners: {
                    specialKey: 'onPopulateOperate'
                  },
                  margin: '2 2 2 2',
                  fieldLabel: '',
                  emptyText: '填充',
                  msgTarget: 'side',
                  step: 1,
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '体积最小值不能为负数'
                },
                editor: {
                  xtype: 'numberfield',
                  allowBlank: false,
                  selectOnFocus: true,
                  blankText: '必填项',
                  msgTarget: 'side',
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '体积最小值不能为负数'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'unit',
                text: '计量单位',
                layout: 'hbox',
                items: {
                  xtype: 'textfield',
                  flex: 1,
                  enableKeyEvents: true,
                  selectOnFocus: true,
                  modelField: 'unit',
                  listeners: {
                    specialKey: 'onPopulateOperate'
                  },
                  margin: '2 2 2 2',
                  fieldLabel: '',
                  emptyText: '填充'
                },
                editor: {
                  allowBlank: true,
                  selectOnFocus: true,
                  maxLength: 20,
                  maxLengthText: '长度控制在20个字符内',
                  msgTarget: 'side'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'purchaseUnit',
                text: '采购单位',
                layout: 'hbox',
                items: {
                  xtype: 'textfield',
                  flex: 1,
                  enableKeyEvents: true,
                  selectOnFocus: true,
                  modelField: 'purchaseUnit',
                  listeners: {
                    specialKey: 'onPopulateOperate'
                  },
                  margin: '2 2 2 2',
                  fieldLabel: '',
                  emptyText: '填充'
                },
                editor: {
                  allowBlank: true,
                  selectOnFocus: true,
                  maxLength: 20,
                  maxLengthText: '长度控制在20个字符内',
                  msgTarget: 'side'
                }
              },
              {
                xtype: 'gridcolumn',
                dataIndex: 'proportion',
                text: '比例',
                align: 'right',
                layout: 'hbox',
                items: {
                  xtype: 'numberfield',
                  flex: 1,
                  enableKeyEvents: true,
                  modelField: 'proportion',
                  listeners: {
                    specialKey: 'onPopulateOperate'
                  },
                  fieldLabel: '',
                  margin: '2 2 2 2',
                  emptyText: '填充',
                  msgTarget: 'side',
                  step: 1,
                  allowDecimals: false,
                  selectOnFocus: true,
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '比例最小值不能为负数'
                },
                editor: {
                  xtype: 'numberfield',
                  allowBlank: false,
                  blankText: '必填项',
                  msgTarget: 'side',
                  selectOnFocus: true,
                  allowDecimals: false,
                  minValue: 0,
                  maxValue: 100000,
                  negativeText: '比例最小值不能为负数'
                }
              }
            ]
          }
        }
      ]
    }
  ]
  ,
  dockedItems: [
    {
      xtype: 'savecanceltoolbar'
    }
  ]

});