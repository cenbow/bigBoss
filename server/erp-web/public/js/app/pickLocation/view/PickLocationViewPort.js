/*
 * File: app/view/PickLocationViewPort.js
 *
 * This file was generated by Sencha Architect version 3.5.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('PickLocation.view.PickLocationViewPort', {
    extend: 'Ext.container.Viewport',
    alias: 'widget.picklocationviewport',

    requires: [
        'Common.ux.PagingToolbarResizer',
        'PickLocation.view.PickLocationViewPortViewModel',
        'PickLocation.view.PickLocationViewPortViewController',
        'Ext.grid.Panel',
        'Ext.view.Table',
        'Ext.ux.grid.SubTable',
        'Ext.button.Button',
        'Ext.toolbar.Fill',
        'Ext.form.field.ComboBox',
        'Ext.grid.column.RowNumberer',
        'Ext.toolbar.Paging',
        'Common.ux.CommandColumn',
        'Ext.grid.plugin.CellEditing'
    ],
    controller: 'picklocationviewport',
    viewModel: {
        type: 'picklocationviewport'
    },
    layout: 'border',

    items: [
        {
            xtype: 'gridpanel',
            region: 'center',
            id: 'skuGrid',
            title: '',
            bind: {
                store: '{gridStore}'
            },
            listeners: {
                rowClick: 'onGridpanelRowClick',
                load: 'onGridpanelLoad',
                afterrender: 'afterGridPanelRender'
            },
            dockedItems: [
                {
                    xtype: 'toolbar',
                    dock: 'top',
                    items: [
                        {
                            xtype: 'button',
                            iconCls: 'page-add',
                            text: '导入库位',
                            bind:{
                                disabled: '{editPermission}'
                            },
                            listeners: {
                                click: 'uploadPickLocation'
                            }
                        },
                        {
                            xtype: 'button',
                            iconCls: 'page-excel',
                            text: '导出当前查询库位',
                            listeners: {
                                click: 'exportPickLocation'
                            }
                        },
                        {
                            xtype: 'tbfill'
                        },
                        {
                            xtype: 'textfield',
                            width: 300,
                            fieldLabel: '快速搜索',
                            labelWidth: 70,
                            emptyText: '商品编码/规格编码/规格名称/条形码',
                            labelAlign: 'right',
                            bind: {
                                value: "{searchOpts.query}"
                            },
                            listeners: {
                                specialKey: 'onFastSearchTextFieldSpecialKey'
                            },
                            triggers: {
                                fastQueryTrigger: {
                                    handler: 'onFastQueryButtonClick',
                                    cls: 'x-form-search-trigger'
                                }
                            }
                        }
                    ]
                },
                {
                    xtype: 'pagingcustomtoolbar',
                    id: 'pickLocationGrid',
                    dock: 'bottom',
                    displayInfo: true,
                    bind: {
                        store: '{gridStore}'
                    }
                }
            ],
            columns: {
                defaults: {
                    cls: 'titleAlign',
                    tdCls: 'with-btngroup'
                },
                items: [

                    {
                        xtype: 'rownumberer',
                        text: '序号',
                        width: 37
                    },
                    {
                        xtype: 'gridcolumn',
                        width: 150,
                        dataIndex: 'productCode',
                        text: '商品编码'
                    },
                    {
                        xtype: 'gridcolumn',
                        width: 250,
                        dataIndex: 'skuCode',
                        text: '规格编码'
                    },
                    {
                        xtype: 'gridcolumn',
                        width: 250,
                        dataIndex: 'barCode',
                        text: '条形码'
                    },
                    {
                        xtype: 'gridcolumn',
                        width: 400,
                        dataIndex: 'skuName',
                        text: '规格名称'
                    }
                ]
            }
        },
        {
            xtype: 'gridpanel',
            collapseMode: 'mini',
            region: 'south',
            height: 300,
            collapsible: false,
            split: true,
            title: '库位详情',
            bind: {
                store: 'pickStore'
            },
            listeners: {
                validateedit : 'validateEdit'
            },
            plugins: [
                {
                    ptype: 'cellediting',
                    clicksToEdit: 1
                }
            ],
            features: [{
                ftype: 'grouping',
                groupHeaderTpl: '仓库名称: {name} (共{rows.length} 个库区)',
                hideGroupedHeader: true,
                expandTip: '',
                collapseTip:'',
                startCollapsed: false
            }],
            columns: {
                defaults: {
                    cls: 'titleAlign',
                    tdCls: 'with-btngroup'
                },
                items: [
                    {
                        text: '库区',
                        dataIndex: 'whsAreaName',
                        width: '20%'
                    }, {
                        text: '拣货库位<span class="pencil"></span>',
                        dataIndex: 'location',
                        width: '20%',
                        editor: {
                            xtype: 'textfield',
                            bind:{
                                'disabled':'{editPermission}'
                            }
                        }
                    }]
            }
        }
    ]

});