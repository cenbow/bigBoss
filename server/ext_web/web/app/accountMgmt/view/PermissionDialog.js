/*
 * File: app/view/PermissionDialog.js
 *
 * This file was generated by Sencha Architect version 3.5.1.
 * http://www.sencha.com/products/architect/
 *
 * This file requires use of the Ext JS 6.0.x library, under independent license.
 * License of Sencha Architect does not include license for Ext JS 6.0.x. For more
 * details see http://www.sencha.com/license or contact license@sencha.com.
 *
 * This file will be auto-generated each and everytime you save your project.
 *
 * Do NOT hand edit this file.
 */

Ext.define('AccountMgmt.view.PermissionDialog', {
  extend: 'Ext.window.Window',
  alias: 'widget.permissiondialog',

  requires: [
    'AccountMgmt.view.PermissionDialogViewController',
    'AccountMgmt.view.PermissionDialogViewModel',
    'AccountMgmt.store.PermissionDialogTreeGridStore'
  ],
  controller: 'permissiondialog',
  viewModel: {
    type: 'permissiondialog'
  },
  height: 500,
  width: 489,
  modal: true,
  layout: 'fit',
  iconCls: "permission",
  constrainHeader: true,
  title: '用户授权',

  items: [
    {
      xtype: 'tabpanel',
      border: false,
      deferredRender:false,
      activeTab: 0,
      items: [
        {
          xtype: 'treepanel',
          height: 250,
          width: 400,
          title: '功能权限',
          useArrows : true,
          bufferedRenderer: false,
          border: false,
          rootVisible: false,
          bind: {
            store: '{treegridstore}'
          },
          listeners: {
            cellclick: '_onCellClick'
          },
          columns: [
            {
              xtype: 'treecolumn',
              width: 200,
              dataIndex: 'name',
              text: '<div style="text-align:center;">权限</div>'
            },
            {
              xtype: 'checkcolumn',
              dataIndex: 'isChecked',
              align: "center",
              text: '授权'
            },
            {
              xtype: 'gridcolumn',
              dataIndex: 'description',
              flex: 1,
              text: '<div style="text-align:center;">说明</div>'
            }
          ],
          tabConfig: {
            xtype: 'tab',
            dock: 'left',
            width: 100
          }
        },
        {
          xtype: 'panel',
          defaults: {
            anchor: '100%'
          },
          layout: 'anchor',
          bodyPadding: 20,
          border: false,
          title: '数据权限',
          scrollable: 'y',
          listeners: {
            beforerender: '_onDataPermissionPanelBeforeRender'
          },
          items: [
            {
              xtype: 'checkboxgroup',
              width: 400,
              reference: 'shopPermission',
              fieldLabel: '&nbsp;店铺权限',
              labelAlign: 'top',
              //columns: 4,
              layout: 'column',
              defaults: {
                columnWidth: 0.33,
                cls:'permission_inline_checkbox'
              },
              items: []
            },
            {
              xtype: 'checkboxgroup',
              margin: '20 0 0 0',
              width: 400,
              reference: 'wareHousePermission',
              fieldLabel: '&nbsp;仓库权限',
              labelAlign: 'top',
              columns: 4,
              items: []
            }
          ]
        }
      ]
    }
  ],
  dockedItems: [
    {
      xtype: 'toolbar',
      dock: 'bottom',
      ui: 'footer',
      items: [
        {
          xtype: 'tbfill'
        },
        {
          xtype: 'button',
          iconCls: 'btn-db',
          text: '从其他账户拷贝',
          listeners: {
            click: 'onCopyFromOtherAccountButtonClick'
          }
        },
        {
          xtype: 'button',
          iconCls: 'btn-save',
          text: '保存',
          listeners: {
            click: 'onSaveButtonClick'
          }
        },
        {
          xtype: 'button',
          iconCls: 'btn-delete',
          text: '取消',
          listeners: {
            click: 'onCancelButtonClick'
          }
        }
      ]
    }
  ]

});